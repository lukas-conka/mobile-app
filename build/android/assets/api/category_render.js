function loadItems(e,i,t,o,a,l,r,_,d){template=e;var s;switch(e){case 1:s="/images/notfound_quatro_quadrados.jpg";break;case 2:s="/images/notfound_tres_verticais.jpg";break;case 3:s="/images/notfound_quatro_verticais.jpg";break;case 4:s="/images/notfound_um_horizontal.jpg";break;case 5:s="/images/notfound_dois_horizontais.jpg";break;case 6:s="/images/notfound_dois_verticais.jpg";break;case 7:s="/images/notfound_quatro_horizontais.jpg";break;case 8:s="/images/notfound_cinco_verticais.jpg";break;case 9:s="/images/notfound_seis_verticais.jpg"}var n=i.fieldByName("prd_id"),c=i.fieldByName("prd_referencia"),f=i.fieldByName("ifp_valor_1"),h=i.fieldByName("prd_data_prazo"),p=i.fieldByName("prd_data_inicio"),y=i.fieldByName("prd_data_fim"),g=i.fieldByName("prd_data_limite");"null"==t?o.text="Ref. "+c+"\n"+formatCurrency(f):(o.text=formatCurrency(f),t.text="Ref. "+c),a.title=selectPeriod(h,p,y,g);var I=getImagesFolder()+selectImagemPrincipal(n),w=Ti.Filesystem.getFile(I);if(w?w.exists()||(I=s):I=s,r.image=I,imageViews.push(r),1==template){var u=Ti.UI.createScrollView({width:"100%",contentWidth:"auto",contentHeight:"auto",scrollType:"vertical",layout:"vertical",showVerticalScrollIndicator:!0,showHorizontalScrollIndicator:!0}),T=Ti.UI.createImageView({width:"48%",left:3,image:I,principal:r});T.addEventListener("click",function(e){e.source.principal.image=e.source.image}),imageViews.push(T);var v=Ti.UI.createView({width:"100%",height:T.toBlob().width,layout:"horizontal"});v.add(T);for(var b=1,m=selectImagensProdutos(n),E=0;E<m.length;E++){var T=Ti.UI.createImageView({width:"48%",left:3,image:scaleImage(getImagesFolder()+m[E]),principal:r});T.addEventListener("click",function(e){e.source.principal.image=e.source.image}),imageViews.push(T),v.add(T),b++,2==b&&(b=0,u.add(v),v=Ti.UI.createView({width:"100%",height:T.toBlob().width,layout:"horizontal"}))}u.add(v),_.add(u)}else{var C="100%",u=Ti.UI.createScrollView({height:C,contentWidth:"auto",contentHeight:"auto",scrollType:"horizontal",layout:"horizontal",showVerticalScrollIndicator:!1,showHorizontalScrollIndicator:!0});_.add(u);var T=Ti.UI.createImageView({height:C,left:3,image:I,principal:r});T.addEventListener("click",function(e){e.source.principal.image=e.source.image}),imageViews.push(T),u.add(T);for(var m=selectImagensProdutos(n),E=0;E<m.length;E++){var T=Ti.UI.createImageView({height:C,left:3,image:scaleImage(getImagesFolder()+m[E]),principal:r});T.addEventListener("click",function(e){e.source.principal.image=e.source.image}),imageViews.push(T),u.add(T)}}l.image="true"==checkSelectedProduct(n)?"/images/selecionar_vermelho.png":"/images/seleciona.png",l.prd_id=n,teste&&l.addEventListener("click",function(e){teste=!1,e.source.image="true"==AddSelectedProduct(e.source.prd_id)?"/images/selecionar_vermelho.png":"/images/seleciona.png",setSelected(d)}),setSelected(d)}function cleanImages(){for(var e=0;e<imageViews.length;e++)imageViews[e].image=null;imageViews=[]}function scaleImage(e){return e}function resizeSmallImage(e){var i=Titanium.UI.createImageView({image:e,width:50,height:50});return e=i.toImage()}function selectPeriod(e,i,t,o){var a,l=new Date(t),r=new Date;switch(Ti.API.info("prazo="+e),e){case"mensal":var _=new Date(l.getYear(),l.getMonth(),0),d=_.getDate(),s=r.getDate(),n=d-o-r;a=10>=n?0==n?"Hj|M\n "+(r.getMonth()+1)+"/"+r.getFullYear():0>n?"M\n "+(r.getMonth()+2)+"/"+r.getFullYear():n+"d|M\n "+(r.getMonth()+1)+"/"+r.getFullYear():"M\n "+(r.getMonth()+1)+"/"+r.getFullYear();break;case"semanal":l.setDate(l.getDate()+o);var d=getDayOfYear(l),s=getDayOfYear(r),n=d-s;a=10>=n?0==n?"Hj|S\n "+(getWeekOfYear(r)+Math.round(o/7))+"/"+r.getFullYear():0>n?"S\n "+(getWeekOfYear(r)+Math.round(o/7)+1)+"/"+r.getFullYear():n+"d|S\n "+(getWeekOfYear(r)+Math.round(o/7))+"/"+r.getFullYear():"S\n "+(getWeekOfYear(r)+Math.round(o/7))+"/"+r.getFullYear();break;case"quinzena":l.setDate(l.getDate()+o);var d=getDayOfYear(l),s=getDayOfYear(r),n=d-s;a=10>=n?0==n?"Hj|Q\n "+Math.ceil((getDayOfYear(r)+1)/15)+"/"+r.getFullYear():0>n?"Q\n "+(Math.ceil((getDayOfYear(r)+1)/15)+2)+"/"+r.getFullYear():n+"d|Q\n "+Math.ceil((getDayOfYear(r)+1)/15)+"/"+r.getFullYear():"Q\n "+Math.ceil((getDayOfYear(r)+1)/15)+"/"+r.getFullYear()}return a}function setSelected(e){var i=getSelectedProducts(),t=0;i&&(t=i.length.toString()),e.title=t}function categoryClear(e){cleanImages(),resetCarrinho(),Ti.App.Properties.setList(SELECTED_PRODUCTS,""),e.title="0";var i=Alloy.createController("categorias").getView();i.open({fullscreen:!0,navBarHidden:!0})}function categoryVoltar(){cleanImages();var e=Alloy.createController("seleciona_cliente").getView();e.open({fullscreen:!0,navBarHidden:!0})}function categoryCesta(){cleanImages();var e=Ti.App.Properties.getList(SELECTED_PRODUCTS);if(e)if(e.length>0){var i=Alloy.createController("calculadora").getView();i.open({fullscreen:!0,navBarHidden:!0})}else alert("Selecione ao menos um produto para avançar");else alert("Selecione ao menos um produto para avançar")}function listProdutos(){var e=Alloy.createController("lista_produtos").getView();e.open({fullscreen:!0,navBarHidden:!0})}function getDayOfYear(e){var i=e.getFullYear(),t=e.getMonth(),o=e.getDate(),a=new Date(i,0,1,12,0,0),l=new Date(i,t,o,12,0,0),r=Math.round((l-a)/864e5);return r+1}function getWeekOfYear(e){var i=getDayOfYear(e),t=Math.ceil(i/7);return t}Ti.include("/database/produtos.js"),Ti.include("/database/carrinho.js");var template=0,imageViews=[],cont=0,teste=!0;