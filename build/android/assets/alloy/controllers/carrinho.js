function __processArg(e,i){var t=null;return e&&(t=e[i]||null,delete e[i]),t}function Controller(){function e(e){var i=0,t=Ti.UI.createScrollView({height:"100%",width:"100%",contentWidth:"auto",contentHeight:"auto",scrollType:"horizontal",layout:"horizontal",showVerticalScrollIndicator:!0,showHorizontalScrollIndicator:!0});for(T.produto.add(t);e.isValidRow();){V++;var o=e.fieldByName("car_id"),r=e.fieldByName("car_quantidade"),_=e.fieldByName("car_preco_unitario");e.fieldByName("car_entrega"),e.fieldByName("car_entrega_prazo");var d=e.fieldByName("prd_id");e.fieldByName("prd_nome");var s=e.fieldByName("prd_referencia"),n=e.fieldByName("prd_nome_colecao"),c=e.fieldByName("prd_data_inicio"),f=e.fieldByName("prd_data_fim"),p=e.fieldByName("prd_data_prazo");e.fieldByName("prd_data_limite");var h=e.fieldByName("prd_peso"),I=e.fieldByName("prd_cub_a"),g=e.fieldByName("prd_cub_l"),w=e.fieldByName("prd_cub_p"),v=e.fieldByName("car_ipi"),b=e.fieldByName("tmh_nome"),m=e.fieldByName("estoque2"),E=e.fieldByName("fk_template");y(c,f,p);var C;switch(E){case 1:C="/images/notfound_quatro_quadrados.jpg";break;case 2:C="/images/notfound_tres_verticais.jpg";break;case 3:C="/images/notfound_quatro_verticais.jpg";break;case 4:C="/images/notfound_um_horizontal.jpg";break;case 5:C="/images/notfound_dois_horizontais.jpg";break;case 6:C="/images/notfound_dois_verticais.jpg";break;case 7:C="/images/notfound_quatro_horizontais.jpg";break;case 8:C="/images/notfound_cinco_verticais.jpg";break;case 9:C="/images/notfound_seis_verticais.jpg"}var k=Titanium.UI.createView({backgroundColor:"#ffe9e9",borderColor:"#dddddd",borderRadius:"6",borderWidth:"1",height:"100%",left:"5",right:"5",width:"100"}),A=Titanium.UI.createLabel({color:"#000000",font:{fontSize:13},height:"10%",text:s+" - "+b,top:"5%"}),N=getImagesFolder()+selectImagemPrincipal(d),N=getImagesFolder()+selectImagemPrincipal(d),L=Ti.Filesystem.getFile(N);L?L.exists()||(N=C):N=C;var U=Titanium.UI.createImageView({height:"48%",image:N,top:"20%"});if("mensal"==p)var R=c.split("-"),x=f.split("-"),S="M";else if("semanal"==p){var S="S",R=c.split("-"),B=new Date(c);R[1]=u(B),R[1]>52&&(R[1]=R[1]-52);var x=f.split("-"),P=new Date(f);x[1]=u(P),x[1]>52&&(x[1]=x[1]-52)}else if("quinzena"==p){var R=c.split("-");R[1]=R[1]<=15?2*R[1]-1:2*R[1];var x=f.split("-");x[1]=x[1]<=15?2*x[1]-1:2*x[1];var S="Q"}var z=Titanium.UI.createLabel({backgroundColor:"transparent",bottom:"5%",color:"#000000",font:{fontSize:13},text:R[1]+"/"+R[0]+" à "+x[1]+"/"+x[0]+" ("+S+")",height:"22%",width:"98%",car_id:o,prazo:p,prd_data_inicio:c,prd_data_fim:f,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER});J.push(z),W.push(c),Y.push(f),H.push(p),Q.push(0),k.periodo=z,k.selected_item=V-1,A.periodo=z,A.selected_item=V-1,U.periodo=z,U.selected_item=V-1,z.periodo=z,z.selected_item=V-1,k.add(A),k.add(U),k.add(z),k.addEventListener("click",function(e){a(e.source.periodo,e.source.selected_item)}),Z.push(k),t.add(k);var G=_*r,O=G*v/100,F=G+O;i+=F,q+=G,$+=O;var X;0==D?(X="pedido_lista_escuro",D++):(D=0,X="pedido_lista_claro"),M.push({car_id:o,car_quantidade:r,estoque:m,template:X,imagem_produto:{image:N},label_ref:{font:{fontSize:13},text:s},label_colecao:{font:{fontSize:13},text:n},label_prazo:{font:{fontSize:13},text:R[1]+"/"+R[0]+" à "+x[1]+"/"+x[0]+" ("+S+")"},label_tam:{font:{fontSize:13},text:b},label_preco:{font:{fontSize:13},text:formatCurrency(_)},label_peso:{font:{fontSize:13},text:h+" Kg"},label_cubagem:{font:{fontSize:13},text:I+" m x "+g+" m x "+w+" m"},label_quant:{font:{fontSize:13},text:r},label_estoque:{font:{fontSize:13},text:m},label_precototal:{text:formatCurrency(G)},label_ipi:{text:v+"%\n"+formatCurrency(O)},label_sustrib:{text:"R$ 0,00"},label_valorfinal:{text:formatCurrency(F)}}),e.next()}l(),T.listapedidos.sections[0].setItems(M),T.valor_total.title="Valor total do pedido: R$ "+formatCurrency(i)}function i(e){var i=T.listapedidos.sections[e.sectionIndex],t=i.getItemAt(e.itemIndex),o=t.car_id,a=t.car_quantidade,l=t.estoque;l>a&&(a++,t.car_quantidade=a,t.label_quant.text=a,i.updateItemAt(e.itemIndex,t),updateCarrinhoQuantidade(o,a))}function t(e){var i=T.listapedidos.sections[e.sectionIndex],t=i.getItemAt(e.itemIndex),o=t.car_id,a=t.car_quantidade;t.estoque,a--,a>0&&(t.car_quantidade=a,t.label_quant.text=a,i.updateItemAt(e.itemIndex,t),updateCarrinhoQuantidade(o,a))}function o(e){var i=T.listapedidos.sections[e.sectionIndex],t=i.getItemAt(e.itemIndex),o=e.itemIndex,a=t.car_id,l=Ti.UI.createAlertDialog({title:"Deseja excluir esse produto ?",buttonNames:["Cancelar","Confirmar"]});l.addEventListener("click",function(e){1==e.index&&(i.deleteItemsAt(o,1),excluidCarrinho(a),scroll.remove(Z[o]),Z.splice(o,1))}),l.show()}function a(e,i){var t=e.car_id,o=e.prazo,a=new Date(e.prd_data_inicio),l=new Date(e.prd_data_fim),r=new Date(R);o==S&&r>=a&&l>=r&&"#f8f419"==e.backgroundColor&&(e.backgroundColor="#81dd1f",g(t,R,S),Ti.API.info("selected_item="+i),Q[i]=1,f())}function l(){removeAllViews(T.periodo_mes),removeAllViews(T.periodo_semana),removeAllViews(T.periodo_quinzena);for(var e=z,i=G,t=e.getMonth()+1,o=i.getMonth()+1+12*(i.getFullYear()-e.getFullYear()),a=e,l=t;o>l;l++){a.setMonth(l);var r=new Date(a.getFullYear(),l,1),_=new Date(a.getFullYear(),l,0),d=a.getMonth()+1+"/"+a.getFullYear()+"\nEntrega:\n"+r.getDate()+" à "+_.getDate(),s=a.getFullYear()+"-"+checkdecimal(a.getMonth()+1)+"-"+checkdecimal(a.getDate()),n=a.getMonth()+1+" Mês";p(d,"mensal",s,n),ai=!0}var t=u(O)+1,o=u(F)+52*(F.getFullYear()-O.getFullYear()),a=O,c=a.getDate(),h=O.getFullYear();c=a.getDate()-a.getDay()+1,a.setDate(c);for(var I=o-t,l=0;I>l;l++){var r=a.getDate(),g=a.getMonth()+1;a.setDate(a.getDate()+6);var _=a.getDate(),y=a.getMonth()+1;a.setDate(a.getDate()+1);var w=52*(a.getFullYear()-h),d=t+l-w+"/"+a.getFullYear()+"\nEntrega:\n"+r+"/"+g+" à "+_+"/"+y,s=a.getFullYear()+"-"+checkdecimal(a.getMonth()+1)+"-"+checkdecimal(a.getDate()),n=t+l+" Semana";p(d,"semanal",s,n),li=!0}var t=0,o=0,v=X.getMonth()+1,a=X;t=X.getDate()<=15?2*v:2*v+1;var v=j.getMonth()+1;o=j.getDate()<=15?2*v+24*(j.getFullYear()-X.getFullYear()):2*v+1+24*(j.getFullYear()-X.getFullYear());for(var I=o-t,b=0,l=t;o>l;l++){if(a.setMonth(Math.ceil(l/2)),v=a.getMonth(),l%2==1)r=1,_=15,a.setDate(_);else{r=16;var m=new Date(a.getFullYear(),v,0);_=m.getDate(),a.setDate(_)}var g=a.getMonth()+1,y=a.getMonth()+1;b=l-24*(a.getFullYear()-X.getFullYear());var d=b+"/"+a.getFullYear()+"\nEntrega:\n/"+g+" à "+_+"/"+y,s=a.getFullYear()+"-"+checkdecimal(a.getMonth()+1)+"-"+checkdecimal(a.getDate()),n=b+" Quinzena";p(d,"quinzena",s,n),ri=!0}f()}function r(){switch(T.view_mes.right="-100%",T.view_semana.right="-100%",T.view_quinzena.right="-100%",T.periodo_label_mes.hide(),T.periodo_label_semana.hide(),T.periodo_label_quinzena.hide(),K=ei){case"mensal":T.view_mes.right="14%",T.view_mes.show(),T.periodo_label_mes.show(),1==li?ei="semanal":1==ri?ei="quinzena":T.seta.hide();break;case"semanal":T.view_semana.right="14%",T.view_semana.show(),T.periodo_label_semana.show(),1==ri?ei="quinzena":1==ai?ei="mensal":T.seta.hide();break;case"quinzena":T.view_quinzena.right="14%",T.view_quinzena.show(),T.periodo_label_quinzena.show(),1==ai?ei="mensal":1==li?ei="semanal":T.seta.hide()}f()}function d(){1>=ti?(alert("Produtos incluidos com sucesso no pedido."),T.pagamento.show()):alert("Seleção de produtos pendente")}function s(){goTo("pagamento")}function n(){goTo("categorias")}function c(){goTo("calculadora")}function f(){ii=0,ti=0;for(var e=0;e<W.length;e++)0==Q[e]&&ti++,H[e]==K&&ii++;T.total_pedidos.title=""+V,T.disponiveis.title=""+ii,T.restantes.title=""+ti}function p(e,i,t,o){var a=Titanium.UI.createLabel({backgroundColor:"#414243",borderWidth:"1",borderColor:"#e71123",color:"#ffffff",height:"80%",width:80,left:3,font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:e,prazo:i,periodo:t,display_value:o});switch(a.addEventListener("click",function(e){e.source.backgroundColor="#F8F419",e.source.color="#000000",oi&&oi!=e.source&&(oi.backgroundColor="#414243",oi.color="#ffffff"),oi=e.source,I(e.source.prazo,e.source.periodo,e.source.display_value)}),i){case"mensal":T.periodo_mes.add(a);break;case"semanal":T.periodo_semana.add(a);break;case"quinzena":T.periodo_quinzena.add(a)}}function h(){S="",R="";for(var e=0;e<W.length;e++)J[e].backgroundColor="transparent",Q[e]=0;f()}function I(e,i,t){for(var o=0;o<W.length;o++){var a=new Date(W[o]),l=new Date(Y[o]),r=new Date(i);S=e,R=r.getFullYear()+"-"+checkdecimal(r.getMonth()+1)+"-"+checkdecimal(r.getDate()),H[o]==e&&r>=a&&l>=r&&("transparent"==J[o].backgroundColor?(J[o].backgroundColor="#f8f419",J[o].text=t):"#f8f419"==J[o].backgroundColor&&(R==x?(J[o].backgroundColor="#81dd1f",Q[o]=1,g(J[o].car_id,i,H[o])):(J[o].backgroundColor="#f8f419",J[o].text=t)))}f(),x=R}function g(e,i,t){var o=new Date(i),a="";a=o.getFullYear()+checkdecimal(o.getMonth()+1)+checkdecimal(o.getDate()),updateCarrinhoPeriod(e,a,t)}function y(e,i,t){var o=new Date(e),a=new Date(i),l=new Date;switch(l>=o&&(o=l),t){case"mensal":z>=o&&(z=o),a>=G&&(G=a);break;case"semanal":O>=o&&(O=o),a>=F&&(F=a);break;case"quinzena":X>=o&&(X=o),a>=j&&(j=a)}}function u(e){var i=w(e),t=Math.ceil(i/7);return t}function w(e){var i=e.getFullYear(),t=e.getMonth(),o=e.getDate(),a=new Date(i,0,1,12,0,0),l=new Date(i,t,o,12,0,0),r=Math.round((l-a)/864e5);return r+1}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="carrinho",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var T=this,v={},b={};T.__views.carrinho=Ti.UI.createWindow({backgroundColor:"white",id:"carrinho"}),T.__views.carrinho&&T.addTopLevelView(T.__views.carrinho),T.__views.__alloyId48=Ti.UI.createView({height:"16%",top:"0%",width:"100%",id:"__alloyId48"}),T.__views.carrinho.add(T.__views.__alloyId48),T.__views.__alloyId49=Ti.UI.createLabel({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"50%",left:"1%",top:"10%",width:"7%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Total de produtos",id:"__alloyId49"}),T.__views.__alloyId48.add(T.__views.__alloyId49),T.__views.__alloyId50=Ti.UI.createLabel({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"50%",left:"8%",top:"10%",width:"7%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Disponíveis no período",id:"__alloyId50"}),T.__views.__alloyId48.add(T.__views.__alloyId50),T.__views.__alloyId51=Ti.UI.createLabel({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"50%",left:"15%",top:"10%",width:"7%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Restantes para marcar",id:"__alloyId51"}),T.__views.__alloyId48.add(T.__views.__alloyId51),T.__views.total_pedidos=Ti.UI.createButton({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"40%",left:"1%",top:"60%",width:"7%",title:"0",id:"total_pedidos"}),T.__views.__alloyId48.add(T.__views.total_pedidos),T.__views.disponiveis=Ti.UI.createButton({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"40%",left:"8%",top:"60%",width:"7%",title:"0",id:"disponiveis"}),T.__views.__alloyId48.add(T.__views.disponiveis),T.__views.restantes=Ti.UI.createButton({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"40%",left:"15%",top:"60%",width:"7%",title:"0",id:"restantes"}),T.__views.__alloyId48.add(T.__views.restantes),T.__views.__alloyId52=Ti.UI.createLabel({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",color:"#ffffff",font:{fontSize:13},height:"40%",left:"24%",top:"10%",width:"9%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Limpar marcação",id:"__alloyId52"}),T.__views.__alloyId48.add(T.__views.__alloyId52),h?T.__views.__alloyId52.addEventListener("click",h):b["$.__views.__alloyId52!click!limparMarcacao"]=!0,T.__views.__alloyId53=Ti.UI.createLabel({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",bottom:"0%",color:"#ffffff",font:{fontSize:13},height:"40%",left:"24%",width:"9%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Continuar comprando",id:"__alloyId53"}),T.__views.__alloyId48.add(T.__views.__alloyId53),n?T.__views.__alloyId53.addEventListener("click",n):b["$.__views.__alloyId53!click!comprando"]=!0,T.__views.periodo_label_mes=Ti.UI.createLabel({height:"90%",right:"64%",top:"10%",color:"#ff0000",font:{fontSize:16},text:"Mês",id:"periodo_label_mes"}),T.__views.__alloyId48.add(T.__views.periodo_label_mes),T.__views.periodo_label_semana=Ti.UI.createLabel({height:"90%",right:"63%",top:"10%",color:"#ff0000",font:{fontSize:16},text:"Semana",id:"periodo_label_semana",visible:"false"}),T.__views.__alloyId48.add(T.__views.periodo_label_semana),T.__views.periodo_label_quinzena=Ti.UI.createLabel({height:"90%",right:"62%",top:"10%",color:"#ff0000",font:{fontSize:16},text:"Quinzena",id:"periodo_label_quinzena",visible:"false"}),T.__views.__alloyId48.add(T.__views.periodo_label_quinzena),T.__views.view_semana=Ti.UI.createView({height:"90%",right:"-100%",top:"10%",width:"50%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,layout:"horizontal",id:"view_semana"}),T.__views.__alloyId48.add(T.__views.view_semana),T.__views.periodo_semana=Ti.UI.createScrollView({height:"100%",contentWidth:"auto",contentHeight:"auto",scrollType:"horizontal",layout:"horizontal",showHorizontalScrollIndicator:!0,id:"periodo_semana"}),T.__views.view_semana.add(T.__views.periodo_semana),T.__views.__alloyId54=Ti.UI.createLabel({backgroundColor:"#414243",borderWidth:"1",borderColor:"#e71123",color:"#ffffff",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"80%",width:"80",text:"05/2015 Entrega: 01 à 31",id:"__alloyId54"}),T.__views.periodo_semana.add(T.__views.__alloyId54),T.__views.view_quinzena=Ti.UI.createView({height:"90%",right:"-100%",top:"10%",width:"50%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,layout:"horizontal",id:"view_quinzena"}),T.__views.__alloyId48.add(T.__views.view_quinzena),T.__views.periodo_quinzena=Ti.UI.createScrollView({height:"100%",contentWidth:"auto",contentHeight:"auto",scrollType:"horizontal",layout:"horizontal",showHorizontalScrollIndicator:!0,id:"periodo_quinzena"}),T.__views.view_quinzena.add(T.__views.periodo_quinzena),T.__views.__alloyId55=Ti.UI.createLabel({backgroundColor:"#414243",borderWidth:"1",borderColor:"#e71123",color:"#ffffff",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"80%",width:"80",text:"05/2015 Entrega: 01 à 31",id:"__alloyId55"}),T.__views.periodo_quinzena.add(T.__views.__alloyId55),T.__views.view_mes=Ti.UI.createView({height:"90%",right:"14%",top:"10%",width:"50%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,layout:"horizontal",id:"view_mes"}),T.__views.__alloyId48.add(T.__views.view_mes),T.__views.periodo_mes=Ti.UI.createScrollView({height:"100%",contentWidth:"auto",contentHeight:"auto",scrollType:"horizontal",layout:"horizontal",showHorizontalScrollIndicator:!0,id:"periodo_mes"}),T.__views.view_mes.add(T.__views.periodo_mes),T.__views.__alloyId56=Ti.UI.createLabel({backgroundColor:"#414243",borderWidth:"1",borderColor:"#e71123",color:"#ffffff",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"80%",width:"80",text:"05/2015 Entrega: 01 à 31",id:"__alloyId56"}),T.__views.periodo_mes.add(T.__views.__alloyId56),T.__views.seta=Ti.UI.createImageView({height:"90%",right:"11%",top:"10%",image:"/images/seta.jpg",id:"seta"}),T.__views.__alloyId48.add(T.__views.seta),r?T.__views.seta.addEventListener("load",r):b["$.__views.seta!load!showDates"]=!0,r?T.__views.seta.addEventListener("click",r):b["$.__views.seta!click!showDates"]=!0,T.__views.__alloyId57=Ti.UI.createButton({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",bottom:"20%",color:"#ffffff",font:{fontSize:13},height:"40%",right:"1%",width:"9%",title:"Fechar pedido",id:"__alloyId57"}),T.__views.__alloyId48.add(T.__views.__alloyId57),d?T.__views.__alloyId57.addEventListener("click",d):b["$.__views.__alloyId57!click!fechar"]=!0,T.__views.__alloyId58=Ti.UI.createLabel({top:"17%",color:"#008382",font:{fontSize:25},left:"1%",text:"Meu Carrinho",id:"__alloyId58"}),T.__views.carrinho.add(T.__views.__alloyId58),T.__views.produto=Ti.UI.createView({height:"19%",top:"23%",layout:"horizontal",width:"99%",id:"produto"}),T.__views.carrinho.add(T.__views.produto),T.__views.__alloyId59=Ti.UI.createView({height:"48%",top:"43%",width:"99%",id:"__alloyId59"}),T.__views.carrinho.add(T.__views.__alloyId59),T.__views.__alloyId60=Ti.UI.createView({backgroundColor:"#008382",height:"10%",top:"0%",width:"100%",id:"__alloyId60"}),T.__views.__alloyId59.add(T.__views.__alloyId60),T.__views.__alloyId61=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"0%",width:"7%",text:"Produto",id:"__alloyId61"}),T.__views.__alloyId60.add(T.__views.__alloyId61),T.__views.__alloyId62=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"7%",width:"10%",text:"Ref.",id:"__alloyId62"}),T.__views.__alloyId60.add(T.__views.__alloyId62),T.__views.__alloyId63=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"17%",width:"5%",text:"Coleção",id:"__alloyId63"}),T.__views.__alloyId60.add(T.__views.__alloyId63),T.__views.__alloyId64=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"23%",width:"7%",text:"Prazo de entrega",id:"__alloyId64"}),T.__views.__alloyId60.add(T.__views.__alloyId64),T.__views.__alloyId65=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"30%",width:"3%",text:"Tam.",id:"__alloyId65"}),T.__views.__alloyId60.add(T.__views.__alloyId65),T.__views.__alloyId66=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"33%",width:"7%",text:"Preço Unit.",id:"__alloyId66"}),T.__views.__alloyId60.add(T.__views.__alloyId66),T.__views.__alloyId67=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"40%",width:"4%",text:"Peso",id:"__alloyId67"}),T.__views.__alloyId60.add(T.__views.__alloyId67),T.__views.__alloyId68=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"44%",width:"16%",text:"Cubagem AxLxP",id:"__alloyId68"}),T.__views.__alloyId60.add(T.__views.__alloyId68),T.__views.__alloyId69=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"60%",width:"6%",text:"Quant. de peças",id:"__alloyId69"}),T.__views.__alloyId60.add(T.__views.__alloyId69),T.__views.__alloyId70=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"66%",width:"6%",text:"Estoque",id:"__alloyId70"}),T.__views.__alloyId60.add(T.__views.__alloyId70),T.__views.__alloyId71=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"72%",width:"7%",text:"Preço total",id:"__alloyId71"}),T.__views.__alloyId60.add(T.__views.__alloyId71),T.__views.__alloyId72=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"79%",width:"7%",text:"IPI",id:"__alloyId72"}),T.__views.__alloyId60.add(T.__views.__alloyId72),T.__views.__alloyId73=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"86%",width:"6%",text:"S.T.",id:"__alloyId73"}),T.__views.__alloyId60.add(T.__views.__alloyId73),T.__views.__alloyId74=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"92%",width:"8%",text:"Valor final do produto",id:"__alloyId74"}),T.__views.__alloyId60.add(T.__views.__alloyId74);var m={},E=[],C={type:"Ti.UI.View",childTemplates:function(){var e=[],a={type:"Ti.UI.View",childTemplates:function(){var e=[],i={type:"Ti.UI.ImageView",bindId:"imagem_produto",properties:{height:"95%",bindId:"imagem_produto"}};return e.push(i),e}(),properties:{width:"7%"}};e.push(a);var l={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(l);var r={type:"Ti.UI.Label",bindId:"label_ref",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"10%",font:{fontSize:9},color:"black",bindId:"label_ref"}};e.push(r);var _={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(_);var d={type:"Ti.UI.Label",bindId:"label_colecao",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"5%",font:{fontSize:9},color:"black",bindId:"label_colecao"}};e.push(d);var s={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(s);var n={type:"Ti.UI.Label",bindId:"label_prazo",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:9},color:"black",bindId:"label_prazo"}};e.push(n);var c={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(c);var f={type:"Ti.UI.Label",bindId:"label_tam",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"3%",font:{fontSize:9},color:"black",bindId:"label_tam"}};e.push(f);var p={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(p);var h={type:"Ti.UI.Label",bindId:"label_preco",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:9},color:"black",bindId:"label_preco"}};e.push(h);var I={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(I);var g={type:"Ti.UI.Label",bindId:"label_peso",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"4%",font:{fontSize:9},color:"black",bindId:"label_peso"}};e.push(g);var y={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(y);var u={type:"Ti.UI.Label",bindId:"label_cubagem",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"16%",font:{fontSize:9},color:"black",bindId:"label_cubagem"}};e.push(u);var w={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(w);var T={type:"Ti.UI.View",childTemplates:function(){var e=[],a={type:"Ti.UI.Button",properties:{left:3,top:5,height:25,width:25,font:{fontSize:11},backgroundColor:"#c0c0c0",color:"black",title:"+"},events:{click:i}};e.push(a);var l={type:"Ti.UI.Label",bindId:"label_quant",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,color:"black",bindId:"label_quant"}};e.push(l);var r={type:"Ti.UI.Button",properties:{left:3,bottom:5,height:25,width:25,font:{fontSize:11},backgroundColor:"#c0c0c0",color:"black",title:"-"},events:{click:t}};e.push(r);var _={type:"Ti.UI.ImageView",properties:{right:3,bottom:3,height:25,width:25,image:"/images/btn_excluir.png"},events:{click:o}};return e.push(_),e}(),properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",color:"black",font:{fontSize:9},backgroundColor:"white"}};e.push(T);var v={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(v);var b={type:"Ti.UI.Label",bindId:"label_estoque",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_estoque"}};e.push(b);var m={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(m);var E={type:"Ti.UI.Label",bindId:"label_precototal",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"black",bindId:"label_precototal"}};e.push(E);var C={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(C);var k={type:"Ti.UI.Label",bindId:"label_ipi",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"black",bindId:"label_ipi"}};e.push(k);var A={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(A);var N={type:"Ti.UI.Label",bindId:"label_sustrib",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_sustrib"}};e.push(N);var L={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(L);var U={type:"Ti.UI.Label",bindId:"label_valorfinal",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_valorfinal"}};return e.push(U),e}(),properties:{layout:"horizontal"}};E.push(C);var k={properties:{width:"100%",backgroundColor:"#EBEBEB",height:100,name:"pedido_lista_escuro"},childTemplates:E};m.pedido_lista_escuro=k;var A=[],N={type:"Ti.UI.View",childTemplates:function(){var e=[],a={type:"Ti.UI.View",childTemplates:function(){var e=[],i={type:"Ti.UI.ImageView",bindId:"imagem_produto",properties:{height:"95%",bindId:"imagem_produto"}};return e.push(i),e}(),properties:{width:"7%"}};e.push(a);var l={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(l);var r={type:"Ti.UI.Label",bindId:"label_ref",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"10%",font:{fontSize:9},color:"black",bindId:"label_ref"}};e.push(r);var _={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(_);var d={type:"Ti.UI.Label",bindId:"label_colecao",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"5%",font:{fontSize:9},color:"black",bindId:"label_colecao"}};e.push(d);var s={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(s);var n={type:"Ti.UI.Label",bindId:"label_prazo",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:9},color:"black",bindId:"label_prazo"}};e.push(n);var c={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(c);var f={type:"Ti.UI.Label",bindId:"label_tam",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"3%",font:{fontSize:9},color:"black",bindId:"label_tam"}};e.push(f);var p={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(p);var h={type:"Ti.UI.Label",bindId:"label_preco",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:9},color:"black",bindId:"label_preco"}};e.push(h);var I={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(I);var g={type:"Ti.UI.Label",bindId:"label_peso",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"4%",font:{fontSize:9},color:"black",bindId:"label_peso"}};e.push(g);var y={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(y);var u={type:"Ti.UI.Label",bindId:"label_cubagem",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"16%",font:{fontSize:9},color:"black",bindId:"label_cubagem"}};e.push(u);var w={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(w);var T={type:"Ti.UI.View",childTemplates:function(){var e=[],a={type:"Ti.UI.Button",properties:{left:3,top:5,height:25,width:25,font:{fontSize:11},backgroundColor:"#c0c0c0",color:"black",title:"+"},events:{click:i}};e.push(a);var l={type:"Ti.UI.Label",bindId:"label_quant",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,color:"black",bindId:"label_quant"}};e.push(l);var r={type:"Ti.UI.Button",properties:{left:3,bottom:5,height:25,width:25,font:{fontSize:11},backgroundColor:"#c0c0c0",color:"black",title:"-"},events:{click:t}};e.push(r);var _={type:"Ti.UI.ImageView",properties:{right:3,bottom:3,height:25,width:25,image:"/images/btn_excluir.png"},events:{click:o}};return e.push(_),e}(),properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",color:"black",font:{fontSize:9},backgroundColor:"white"}};e.push(T);var v={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(v);var b={type:"Ti.UI.Label",bindId:"label_estoque",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_estoque"}};e.push(b);var m={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(m);var E={type:"Ti.UI.Label",bindId:"label_precototal",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"black",bindId:"label_precototal"}};e.push(E);var C={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(C);var k={type:"Ti.UI.Label",bindId:"label_ipi",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"black",bindId:"label_ipi"}};e.push(k);var A={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(A);var N={type:"Ti.UI.Label",bindId:"label_sustrib",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_sustrib"}};e.push(N);var L={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(L);var U={type:"Ti.UI.Label",bindId:"label_valorfinal",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_valorfinal"}};return e.push(U),e}(),properties:{layout:"horizontal"}};A.push(N);var L={properties:{width:"100%",backgroundColor:"#FBFBFB",height:100,name:"pedido_lista_claro"},childTemplates:A};m.pedido_lista_claro=L,T.__views.__alloyId220=Ti.UI.createListSection({id:"__alloyId220"});var U=[];U.push(T.__views.__alloyId220),T.__views.listapedidos=Ti.UI.createListView({width:"99%",height:"80%",top:"10%",sections:U,templates:m,id:"listapedidos",defaultItemTemplate:"pedido_lista"}),T.__views.__alloyId59.add(T.__views.listapedidos),T.__views.__alloyId223=Ti.UI.createView({backgroundColor:"#008382",height:"10%",layout:"horizontal",top:"90%",width:"99%",id:"__alloyId223"}),T.__views.__alloyId59.add(T.__views.__alloyId223),T.__views.__alloyId224=Ti.UI.createView({width:1,height:"100%",id:"__alloyId224"}),T.__views.__alloyId223.add(T.__views.__alloyId224),T.__views.__alloyId225=Ti.UI.createView({width:1,height:"100%",id:"__alloyId225"}),T.__views.__alloyId223.add(T.__views.__alloyId225),T.__views.__alloyId226=Ti.UI.createView({width:1,height:"100%",id:"__alloyId226"}),T.__views.__alloyId223.add(T.__views.__alloyId226),T.__views.__alloyId227=Ti.UI.createView({width:1,height:"100%",id:"__alloyId227"}),T.__views.__alloyId223.add(T.__views.__alloyId227),T.__views.__alloyId228=Ti.UI.createView({width:1,height:"100%",id:"__alloyId228"}),T.__views.__alloyId223.add(T.__views.__alloyId228),T.__views.__alloyId229=Ti.UI.createLabel({color:"#ffffff",font:{fontSize:"14"},height:"100%",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,width:"39%",text:"SOMA DOS TOTAIS:",id:"__alloyId229"}),T.__views.__alloyId223.add(T.__views.__alloyId229),T.__views.__alloyId230=Ti.UI.createView({width:1,height:"100%",backgroundColor:"black",id:"__alloyId230"}),T.__views.__alloyId223.add(T.__views.__alloyId230),T.__views.__alloyId231=Ti.UI.createView({width:1,height:"100%",id:"__alloyId231"}),T.__views.__alloyId223.add(T.__views.__alloyId231),T.__views.__alloyId232=Ti.UI.createView({width:1,height:"100%",id:"__alloyId232"}),T.__views.__alloyId223.add(T.__views.__alloyId232),T.__views.__alloyId233=Ti.UI.createView({width:1,height:"100%",id:"__alloyId233"}),T.__views.__alloyId223.add(T.__views.__alloyId233),T.__views.__alloyId234=Ti.UI.createView({width:1,height:"100%",id:"__alloyId234"}),T.__views.__alloyId223.add(T.__views.__alloyId234),T.__views.label_totalPreco=Ti.UI.createLabel({color:"#ffffff",font:{fontSize:"14"},height:"100%",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,width:"39%",id:"label_totalPreco"}),T.__views.__alloyId223.add(T.__views.label_totalPreco),T.__views.__alloyId235=Ti.UI.createView({width:1,height:"100%",backgroundColor:"black",id:"__alloyId235"}),T.__views.__alloyId223.add(T.__views.__alloyId235),T.__views.label_totalIpi=Ti.UI.createLabel({textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"#ffffff",id:"label_totalIpi"}),T.__views.__alloyId223.add(T.__views.label_totalIpi),T.__views.__alloyId236=Ti.UI.createView({width:1,height:"100%",backgroundColor:"black",id:"__alloyId236"}),T.__views.__alloyId223.add(T.__views.__alloyId236),T.__views.__alloyId237=Ti.UI.createLabel({textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",id:"__alloyId237"}),T.__views.__alloyId223.add(T.__views.__alloyId237),T.__views.__alloyId238=Ti.UI.createView({width:1,height:"100%",backgroundColor:"black",id:"__alloyId238"}),T.__views.__alloyId223.add(T.__views.__alloyId238),T.__views.label_totalComIPI=Ti.UI.createLabel({textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"#ffffff",id:"label_totalComIPI"}),T.__views.__alloyId223.add(T.__views.label_totalComIPI),T.__views.__alloyId239=Ti.UI.createView({backgroundColor:"#59595b",bottom:"1%",height:"7%",width:"99%",id:"__alloyId239"}),T.__views.carrinho.add(T.__views.__alloyId239),T.__views.__alloyId240=Ti.UI.createButton({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",bottom:"10%",color:"#ffffff",font:{fontSize:13},height:"80%",left:"1%",width:"10%",title:"Voltar",id:"__alloyId240"}),T.__views.__alloyId239.add(T.__views.__alloyId240),c?T.__views.__alloyId240.addEventListener("click",c):b["$.__views.__alloyId240!click!voltar"]=!0,T.__views.pagamento=Ti.UI.createButton({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",bottom:"10%",color:"#ffffff",font:{fontSize:11},height:"80%",left:"13%",width:"10%",title:"Ir para pagamento",id:"pagamento"}),T.__views.__alloyId239.add(T.__views.pagamento),s?T.__views.pagamento.addEventListener("click",s):b["$.__views.pagamento!click!pagamento"]=!0,T.__views.valor_total=Ti.UI.createButton({backgroundColor:"#59595b",bottom:"10%",color:"#ffffff",font:{fontSize:13},height:"80%",right:"1%",width:"30%",title:"Valor total do pedido: R$ 0.00",id:"valor_total"}),T.__views.__alloyId239.add(T.__views.valor_total),v.destroy=function(){},_.extend(T,T.__views),Ti.include("/api/config.js"),Ti.include("/database/carrinho.js"),Ti.include("/database/imagens_produtos.js");
var R,x,S,V=0,D=0,M=[],B="2020-01-01",P="2000-01-01",z=new Date(B),G=new Date(P),O=new Date(B),F=new Date(P),X=new Date(B),j=new Date(P),q=0,$=0,W=[],Y=[],H=[],J=[],Q=[],Z=[],K="mensal",ei="mensal",ii=0,ti=0;T.periodo_label_mes.transform=Ti.UI.create2DMatrix().rotate(-90),T.periodo_label_semana.transform=Ti.UI.create2DMatrix().rotate(-90),T.periodo_label_quinzena.transform=Ti.UI.create2DMatrix().rotate(-90);var oi,ai=!1,li=!1,ri=!1,_i=selecionaCarrinho();e(_i),T.label_totalPreco.text=formatCurrency(q),T.label_totalIpi.text=formatCurrency($);var di=q+$;T.label_totalComIPI.text=formatCurrency(di),T.pagamento.hide(),T.periodo_label_mes.hide(),T.periodo_label_semana.hide(),T.periodo_label_quinzena.hide(),0==ai&&(r(),r()),b["$.__views.__alloyId52!click!limparMarcacao"]&&T.__views.__alloyId52.addEventListener("click",h),b["$.__views.__alloyId53!click!comprando"]&&T.__views.__alloyId53.addEventListener("click",n),b["$.__views.seta!load!showDates"]&&T.__views.seta.addEventListener("load",r),b["$.__views.seta!click!showDates"]&&T.__views.seta.addEventListener("click",r),b["$.__views.__alloyId57!click!fechar"]&&T.__views.__alloyId57.addEventListener("click",d),b["$.__views.__alloyId240!click!voltar"]&&T.__views.__alloyId240.addEventListener("click",c),b["$.__views.pagamento!click!pagamento"]&&T.__views.pagamento.addEventListener("click",s),_.extend(T,v)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;