var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._,Controller=function(){function e(){return t.__widgetId?{widgetId:t.__widgetId,name:t.__controllerPath}:t.__controllerPath}var i=[],t=this;this.__iamalloy=!0,_.extend(this,Backbone.Events,{__views:{},__proxyProperties:{},setParent:function(e){var t=i.length;if(t){this.parent=e.__iamalloy?e.parent:e;for(var o=0;t>o;o++)i[o].__iamalloy?i[o].setParent(this.parent):this.parent.add(i[o])}},addTopLevelView:function(e){i.push(e)},addProxyProperty:function(e,i){this.__proxyProperties[e]=i},removeProxyProperty:function(e){delete this.__proxyProperties[e]},getTopLevelViews:function(){return i},getView:function(e){return"undefined"==typeof e||null===e?i[0]:this.__views[e]},removeView:function(e){delete this[e],delete this.__views[e]},getProxyProperty:function(e){return this.__proxyProperties[e]},getViews:function(){return this.__views},destroy:function(){},getViewEx:function(e){var i=e.recurse||!1;if(i){var t=this.getView();return t?t.__iamalloy?t.getViewEx({recurse:!0}):t:null}return this.getView()},getProxyPropertyEx:function(e,i){var t=i.recurse||!1;if(t){var o=this.getProxyProperty(e);return o?o.__iamalloy?o.getProxyProperty(e,{recurse:!0}):o:null}return this.getView(e)},createStyle:function(i){return Alloy.createStyle(e(),i)},UI:{create:function(i,t){return Alloy.UI.create(e(),i,t)}},addClass:function(i,t,o){return Alloy.addClass(e(),i,t,o)},removeClass:function(i,t,o){return Alloy.removeClass(e(),i,t,o)},resetClass:function(i,t,o){return Alloy.resetClass(e(),i,t,o)},updateViews:function(e){var i=this.getViews();return _.isObject(e)&&_.each(_.keys(e),function(t){var o=i[t.substring(1)];0===t.indexOf("#")&&"#"!==t&&_.isObject(o)&&"function"==typeof o.applyProperties&&o.applyProperties(e[t])}),this}})};module.exports=Controller;