function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e){var t=0,i=Ti.UI.createScrollView({height:"100%",width:"100%",contentWidth:"auto",contentHeight:"auto",scrollType:"horizontal",layout:"horizontal",showVerticalScrollIndicator:!0,showHorizontalScrollIndicator:!0});for(T.produto.add(i);e.isValidRow();){z++;var o=e.fieldByName("car_id"),r=e.fieldByName("car_quantidade"),_=e.fieldByName("car_preco_unitario");e.fieldByName("car_entrega"),e.fieldByName("car_entrega_prazo");var d=e.fieldByName("prd_id");e.fieldByName("prd_nome");var n=e.fieldByName("prd_referencia"),s=e.fieldByName("prd_nome_colecao"),c=e.fieldByName("prd_data_inicio"),f=e.fieldByName("prd_data_fim"),h=e.fieldByName("prd_data_prazo");e.fieldByName("prd_data_limite");var I=e.fieldByName("prd_peso"),u=e.fieldByName("prd_cub_a"),p=e.fieldByName("prd_cub_l"),g=e.fieldByName("prd_cub_p"),y=e.fieldByName("car_ipi"),b=e.fieldByName("tmh_nome"),m=e.fieldByName("estoque2"),E=e.fieldByName("fk_template");w(c,f,h);var N;switch(E){case 1:N="/images/notfound_quatro_quadrados.jpg";break;case 2:N="/images/notfound_tres_verticais.jpg";break;case 3:N="/images/notfound_quatro_verticais.jpg";break;case 4:N="/images/notfound_um_horizontal.jpg";break;case 5:N="/images/notfound_dois_horizontais.jpg";break;case 6:N="/images/notfound_dois_verticais.jpg";break;case 7:N="/images/notfound_quatro_horizontais.jpg";break;case 8:N="/images/notfound_cinco_verticais.jpg";break;case 9:N="/images/notfound_seis_verticais.jpg"}var A=Titanium.UI.createView({backgroundColor:"#ffe9e9",borderColor:"#dddddd",borderRadius:"6",borderWidth:"1",height:"100%",left:"5",right:"5",width:"100"}),k=Titanium.UI.createLabel({color:"#000000",font:{fontSize:13},height:"10%",text:n+" - "+b,top:"5%"}),U=getImagesFolder()+selectImagemPrincipal(d),U=getImagesFolder()+selectImagemPrincipal(d),L=Ti.Filesystem.getFile(U);L?L.exists()||(U=N):U=N;var x=Titanium.UI.createImageView({height:"48%",image:U,top:"20%"});if("mensal"==h)var C=c.split("-"),S=f.split("-"),R="M";else if("semanal"==h){var R="S",C=c.split("-"),P=new Date(c);C[1]=v(P),C[1]>52&&(C[1]=C[1]-52);var S=f.split("-"),B=new Date(f);S[1]=v(B),S[1]>52&&(S[1]=S[1]-52)}else if("quinzena"==h){var C=c.split("-");C[1]=C[1]<=15?2*C[1]-1:2*C[1];var S=f.split("-");S[1]=S[1]<=15?2*S[1]-1:2*S[1];var R="Q"}var O=Titanium.UI.createLabel({backgroundColor:"transparent",bottom:"5%",color:"#000000",font:{fontSize:13},text:C[1]+"/"+C[0]+" à "+S[1]+"/"+S[0]+" ("+R+")",height:"22%",width:"98%",car_id:o,prazo:h,prd_data_inicio:c,prd_data_fim:f,textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER});J.push(O),W.push(c),j.push(f),H.push(h),Q.push(0),A.periodo=O,A.selected_item=z-1,k.periodo=O,k.selected_item=z-1,x.periodo=O,x.selected_item=z-1,O.periodo=O,O.selected_item=z-1,A.add(k),A.add(x),A.add(O),A.addEventListener("click",function(e){a(e.source.periodo,e.source.selected_item)}),K.push(A),i.add(A);var D=_*r,G=D*y/100,F=D+G;t+=F,q+=D,Y+=G;var X;0==V?(X="pedido_lista_escuro",V++):(V=0,X="pedido_lista_claro"),M.push({car_id:o,car_quantidade:r,estoque:m,template:X,imagem_produto:{image:U},label_ref:{font:{fontSize:13},text:n},label_colecao:{font:{fontSize:13},text:s},label_prazo:{font:{fontSize:13},text:C[1]+"/"+C[0]+" à "+S[1]+"/"+S[0]+" ("+R+")"},label_tam:{font:{fontSize:13},text:b},label_preco:{font:{fontSize:13},text:formatCurrency(_)},label_peso:{font:{fontSize:13},text:I+" Kg"},label_cubagem:{font:{fontSize:13},text:u+" m x "+p+" m x "+g+" m"},label_quant:{font:{fontSize:13},text:r},label_estoque:{font:{fontSize:13},text:m},label_precototal:{text:formatCurrency(D)},label_ipi:{text:y+"%\n"+formatCurrency(G)},label_sustrib:{text:"R$ 0,00"},label_valorfinal:{text:formatCurrency(F)}}),e.next()}l(),T.listapedidos.sections[0].setItems(M),T.valor_total.title="Valor total do pedido: R$ "+formatCurrency(t)}function t(e){var t=T.listapedidos.sections[e.sectionIndex],i=t.getItemAt(e.itemIndex),o=i.car_id,a=i.car_quantidade,l=i.estoque;l>a&&(a++,i.car_quantidade=a,i.label_quant.text=a,t.updateItemAt(e.itemIndex,i),updateCarrinhoQuantidade(o,a))}function i(e){var t=T.listapedidos.sections[e.sectionIndex],i=t.getItemAt(e.itemIndex),o=i.car_id,a=i.car_quantidade;i.estoque,a--,a>0&&(i.car_quantidade=a,i.label_quant.text=a,t.updateItemAt(e.itemIndex,i),updateCarrinhoQuantidade(o,a))}function o(e){var t=T.listapedidos.sections[e.sectionIndex],i=t.getItemAt(e.itemIndex),o=e.itemIndex,a=i.car_id,l=Ti.UI.createAlertDialog({title:"Deseja excluir esse produto ?",buttonNames:["Cancelar","Confirmar"]});l.addEventListener("click",function(e){1==e.index&&(t.deleteItemsAt(o,1),excluidCarrinho(a),scroll.remove(K[o]),K.splice(o,1))}),l.show()}function a(e,t){var i=e.car_id,o=e.prazo,a=new Date(e.prd_data_inicio),l=new Date(e.prd_data_fim),r=new Date(C);o==R&&r>=a&&l>=r&&"#f8f419"==e.backgroundColor&&(e.backgroundColor="#81dd1f",p(i,C,R),Ti.API.info("selected_item="+t),Q[t]=1,f())}function l(){removeAllViews(T.periodo_mes),removeAllViews(T.periodo_semana),removeAllViews(T.periodo_quinzena);for(var e=O,t=D,i=e.getMonth()+1,o=t.getMonth()+1+12*(t.getFullYear()-e.getFullYear()),a=e,l=i;o>l;l++){a.setMonth(l);var r=new Date(a.getFullYear(),l,1),_=new Date(a.getFullYear(),l,0),d=a.getMonth()+1+"/"+a.getFullYear()+"\nEntrega:\n"+r.getDate()+" à "+_.getDate(),n=a.getFullYear()+"-"+checkdecimal(a.getMonth()+1)+"-"+checkdecimal(a.getDate()),s=a.getMonth()+1+" Mês";h(d,"mensal",n,s),at=!0}var i=v(G)+1,o=v(F)+52*(F.getFullYear()-G.getFullYear()),a=G,c=a.getDate(),I=G.getFullYear();c=a.getDate()-a.getDay()+1,a.setDate(c);for(var u=o-i,l=0;u>l;l++){var r=a.getDate(),p=a.getMonth()+1;a.setDate(a.getDate()+6);var _=a.getDate(),w=a.getMonth()+1;a.setDate(a.getDate()+1);var g=52*(a.getFullYear()-I),d=i+l-g+"/"+a.getFullYear()+"\nEntrega:\n"+r+"/"+p+" à "+_+"/"+w,n=a.getFullYear()+"-"+checkdecimal(a.getMonth()+1)+"-"+checkdecimal(a.getDate()),s=i+l+" Semana";h(d,"semanal",n,s),lt=!0}var i=0,o=0,y=X.getMonth()+1,a=X;i=X.getDate()<=15?2*y:2*y+1;var y=$.getMonth()+1;o=$.getDate()<=15?2*y+24*($.getFullYear()-X.getFullYear()):2*y+1+24*($.getFullYear()-X.getFullYear());for(var u=o-i,b=0,l=i;o>l;l++){if(a.setMonth(Math.ceil(l/2)),y=a.getMonth(),l%2==1)r=1,_=15,a.setDate(_);else{r=16;var m=new Date(a.getFullYear(),y,0);_=m.getDate(),a.setDate(_)}var p=a.getMonth()+1,w=a.getMonth()+1;b=l-24*(a.getFullYear()-X.getFullYear());var d=b+"/"+a.getFullYear()+"\nEntrega:\n/"+p+" à "+_+"/"+w,n=a.getFullYear()+"-"+checkdecimal(a.getMonth()+1)+"-"+checkdecimal(a.getDate()),s=b+" Quinzena";h(d,"quinzena",n,s),rt=!0}f()}function r(){switch(T.view_mes.right="-100%",T.view_semana.right="-100%",T.view_quinzena.right="-100%",T.periodo_label_mes.hide(),T.periodo_label_semana.hide(),T.periodo_label_quinzena.hide(),Z=et){case"mensal":T.view_mes.right="14%",T.view_mes.show(),T.periodo_label_mes.show(),1==lt?et="semanal":1==rt?et="quinzena":T.seta.hide();break;case"semanal":T.view_semana.right="14%",T.view_semana.show(),T.periodo_label_semana.show(),1==rt?et="quinzena":1==at?et="mensal":T.seta.hide();break;case"quinzena":T.view_quinzena.right="14%",T.view_quinzena.show(),T.periodo_label_quinzena.show(),1==at?et="mensal":1==lt?et="semanal":T.seta.hide()}f()}function d(){1>=it?(alert("Produtos incluidos com sucesso no pedido."),T.pagamento.show()):alert("Seleção de produtos pendente")}function n(){goTo("pagamento")}function s(){goTo("categorias")}function c(){goTo("calculadora")}function f(){tt=0,it=0;for(var e=0;e<W.length;e++)0==Q[e]&&it++,H[e]==Z&&tt++;T.total_pedidos.title=""+z,T.disponiveis.title=""+tt,T.restantes.title=""+it}function h(e,t,i,o){var a=Titanium.UI.createLabel({backgroundColor:"#414243",borderWidth:"1",borderColor:"#e71123",color:"#ffffff",height:"80%",width:80,left:3,font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:e,prazo:t,periodo:i,display_value:o});switch(a.addEventListener("click",function(e){e.source.backgroundColor="#F8F419",e.source.color="#000000",ot&&ot!=e.source&&(ot.backgroundColor="#414243",ot.color="#ffffff"),ot=e.source,u(e.source.prazo,e.source.periodo,e.source.display_value)}),t){case"mensal":T.periodo_mes.add(a);break;case"semanal":T.periodo_semana.add(a);break;case"quinzena":T.periodo_quinzena.add(a)}}function I(){R="",C="";for(var e=0;e<W.length;e++)J[e].backgroundColor="transparent",Q[e]=0;f()}function u(e,t,i){for(var o=0;o<W.length;o++){var a=new Date(W[o]),l=new Date(j[o]),r=new Date(t);R=e,C=r.getFullYear()+"-"+checkdecimal(r.getMonth()+1)+"-"+checkdecimal(r.getDate()),H[o]==e&&r>=a&&l>=r&&("transparent"==J[o].backgroundColor?(J[o].backgroundColor="#f8f419",J[o].text=i):"#f8f419"==J[o].backgroundColor&&(C==S?(J[o].backgroundColor="#81dd1f",Q[o]=1,p(J[o].car_id,t,H[o])):(J[o].backgroundColor="#f8f419",J[o].text=i)))}f(),S=C}function p(e,t,i){var o=new Date(t),a="";a=o.getFullYear()+checkdecimal(o.getMonth()+1)+checkdecimal(o.getDate()),updateCarrinhoPeriod(e,a,i)}function w(e,t,i){var o=new Date(e),a=new Date(t),l=new Date;switch(l>=o&&(o=l),i){case"mensal":O>=o&&(O=o),a>=D&&(D=a);break;case"semanal":G>=o&&(G=o),a>=F&&(F=a);break;case"quinzena":X>=o&&(X=o),a>=$&&($=a)}}function v(e){var t=g(e),i=Math.ceil(t/7);return i}function g(e){var t=e.getFullYear(),i=e.getMonth(),o=e.getDate(),a=new Date(t,0,1,12,0,0),l=new Date(t,i,o,12,0,0),r=Math.round((l-a)/864e5);return r+1}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="carrinho",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var T=this,y={},b={};T.__views.carrinho=Ti.UI.createWindow({backgroundColor:"white",id:"carrinho"}),T.__views.carrinho&&T.addTopLevelView(T.__views.carrinho),T.__views.__alloyId48=Ti.UI.createView({height:"16%",top:"0%",width:"100%",id:"__alloyId48"}),T.__views.carrinho.add(T.__views.__alloyId48),T.__views.__alloyId49=Ti.UI.createLabel({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"50%",left:"1%",top:"10%",width:"7%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Total de produtos",id:"__alloyId49"}),T.__views.__alloyId48.add(T.__views.__alloyId49),T.__views.__alloyId50=Ti.UI.createLabel({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"50%",left:"8%",top:"10%",width:"7%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Disponíveis no período",id:"__alloyId50"}),T.__views.__alloyId48.add(T.__views.__alloyId50),T.__views.__alloyId51=Ti.UI.createLabel({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"50%",left:"15%",top:"10%",width:"7%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Restantes para marcar",id:"__alloyId51"}),T.__views.__alloyId48.add(T.__views.__alloyId51),T.__views.total_pedidos=Ti.UI.createButton({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"40%",left:"1%",top:"60%",width:"7%",title:"0",id:"total_pedidos"}),T.__views.__alloyId48.add(T.__views.total_pedidos),T.__views.disponiveis=Ti.UI.createButton({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"40%",left:"8%",top:"60%",width:"7%",title:"0",id:"disponiveis"}),T.__views.__alloyId48.add(T.__views.disponiveis),T.__views.restantes=Ti.UI.createButton({backgroundColor:"#ffffff",borderColor:"#b4282d",borderWidth:"1",color:"#b4282d",font:{fontSize:13},height:"40%",left:"15%",top:"60%",width:"7%",title:"0",id:"restantes"}),T.__views.__alloyId48.add(T.__views.restantes),T.__views.__alloyId52=Ti.UI.createLabel({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",color:"#ffffff",font:{fontSize:13},height:"40%",left:"24%",top:"10%",width:"9%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Limpar marcação",id:"__alloyId52"}),T.__views.__alloyId48.add(T.__views.__alloyId52),I?T.__views.__alloyId52.addEventListener("click",I):b["$.__views.__alloyId52!click!limparMarcacao"]=!0,T.__views.__alloyId53=Ti.UI.createLabel({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",bottom:"0%",color:"#ffffff",font:{fontSize:13},height:"40%",left:"24%",width:"9%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,text:"Continuar comprando",id:"__alloyId53"}),T.__views.__alloyId48.add(T.__views.__alloyId53),s?T.__views.__alloyId53.addEventListener("click",s):b["$.__views.__alloyId53!click!comprando"]=!0,T.__views.periodo_label_mes=Ti.UI.createLabel({height:"90%",right:"64%",top:"10%",color:"#ff0000",font:{fontSize:16},text:"Mês",id:"periodo_label_mes"}),T.__views.__alloyId48.add(T.__views.periodo_label_mes),T.__views.periodo_label_semana=Ti.UI.createLabel({height:"90%",right:"63%",top:"10%",color:"#ff0000",font:{fontSize:16},text:"Semana",id:"periodo_label_semana",visible:"false"}),T.__views.__alloyId48.add(T.__views.periodo_label_semana),T.__views.periodo_label_quinzena=Ti.UI.createLabel({height:"90%",right:"62%",top:"10%",color:"#ff0000",font:{fontSize:16},text:"Quinzena",id:"periodo_label_quinzena",visible:"false"}),T.__views.__alloyId48.add(T.__views.periodo_label_quinzena),T.__views.view_semana=Ti.UI.createView({height:"90%",right:"-100%",top:"10%",width:"50%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,layout:"horizontal",id:"view_semana"}),T.__views.__alloyId48.add(T.__views.view_semana),T.__views.periodo_semana=Ti.UI.createScrollView({height:"100%",contentWidth:"auto",contentHeight:"auto",scrollType:"horizontal",layout:"horizontal",showHorizontalScrollIndicator:!0,id:"periodo_semana"}),T.__views.view_semana.add(T.__views.periodo_semana),T.__views.__alloyId54=Ti.UI.createLabel({backgroundColor:"#414243",borderWidth:"1",borderColor:"#e71123",color:"#ffffff",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"80%",width:"80",text:"05/2015 Entrega: 01 à 31",id:"__alloyId54"}),T.__views.periodo_semana.add(T.__views.__alloyId54),T.__views.view_quinzena=Ti.UI.createView({height:"90%",right:"-100%",top:"10%",width:"50%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,layout:"horizontal",id:"view_quinzena"}),T.__views.__alloyId48.add(T.__views.view_quinzena),T.__views.periodo_quinzena=Ti.UI.createScrollView({height:"100%",contentWidth:"auto",contentHeight:"auto",scrollType:"horizontal",layout:"horizontal",showHorizontalScrollIndicator:!0,id:"periodo_quinzena"}),T.__views.view_quinzena.add(T.__views.periodo_quinzena),T.__views.__alloyId55=Ti.UI.createLabel({backgroundColor:"#414243",borderWidth:"1",borderColor:"#e71123",color:"#ffffff",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"80%",width:"80",text:"05/2015 Entrega: 01 à 31",id:"__alloyId55"}),T.__views.periodo_quinzena.add(T.__views.__alloyId55),T.__views.view_mes=Ti.UI.createView({height:"90%",right:"14%",top:"10%",width:"50%",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,layout:"horizontal",id:"view_mes"}),T.__views.__alloyId48.add(T.__views.view_mes),T.__views.periodo_mes=Ti.UI.createScrollView({height:"100%",contentWidth:"auto",contentHeight:"auto",scrollType:"horizontal",layout:"horizontal",showHorizontalScrollIndicator:!0,id:"periodo_mes"}),T.__views.view_mes.add(T.__views.periodo_mes),T.__views.__alloyId56=Ti.UI.createLabel({backgroundColor:"#414243",borderWidth:"1",borderColor:"#e71123",color:"#ffffff",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"80%",width:"80",text:"05/2015 Entrega: 01 à 31",id:"__alloyId56"}),T.__views.periodo_mes.add(T.__views.__alloyId56),T.__views.seta=Ti.UI.createImageView({height:"90%",right:"11%",top:"10%",image:"/images/seta.jpg",id:"seta"}),T.__views.__alloyId48.add(T.__views.seta),r?T.__views.seta.addEventListener("load",r):b["$.__views.seta!load!showDates"]=!0,r?T.__views.seta.addEventListener("click",r):b["$.__views.seta!click!showDates"]=!0,T.__views.__alloyId57=Ti.UI.createButton({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",bottom:"20%",color:"#ffffff",font:{fontSize:13},height:"40%",right:"1%",width:"9%",title:"Fechar pedido",id:"__alloyId57"}),T.__views.__alloyId48.add(T.__views.__alloyId57),d?T.__views.__alloyId57.addEventListener("click",d):b["$.__views.__alloyId57!click!fechar"]=!0,T.__views.__alloyId58=Ti.UI.createLabel({top:"17%",color:"#008382",font:{fontSize:25},left:"1%",text:"Meu Carrinho",id:"__alloyId58"}),T.__views.carrinho.add(T.__views.__alloyId58),T.__views.produto=Ti.UI.createView({height:"19%",top:"23%",layout:"horizontal",width:"99%",id:"produto"}),T.__views.carrinho.add(T.__views.produto),T.__views.__alloyId59=Ti.UI.createView({height:"48%",top:"43%",width:"99%",id:"__alloyId59"}),T.__views.carrinho.add(T.__views.__alloyId59),T.__views.__alloyId60=Ti.UI.createView({backgroundColor:"#008382",height:"10%",top:"0%",width:"100%",id:"__alloyId60"}),T.__views.__alloyId59.add(T.__views.__alloyId60),T.__views.__alloyId61=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"0%",width:"7%",text:"Produto",id:"__alloyId61"}),T.__views.__alloyId60.add(T.__views.__alloyId61),T.__views.__alloyId62=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"7%",width:"10%",text:"Ref.",id:"__alloyId62"}),T.__views.__alloyId60.add(T.__views.__alloyId62),T.__views.__alloyId63=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"17%",width:"5%",text:"Coleção",id:"__alloyId63"}),T.__views.__alloyId60.add(T.__views.__alloyId63),T.__views.__alloyId64=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"23%",width:"7%",text:"Prazo de entrega",id:"__alloyId64"}),T.__views.__alloyId60.add(T.__views.__alloyId64),T.__views.__alloyId65=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"30%",width:"3%",text:"Tam.",id:"__alloyId65"}),T.__views.__alloyId60.add(T.__views.__alloyId65),T.__views.__alloyId66=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"33%",width:"7%",text:"Preço Unit.",id:"__alloyId66"}),T.__views.__alloyId60.add(T.__views.__alloyId66),T.__views.__alloyId67=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"40%",width:"4%",text:"Peso",id:"__alloyId67"}),T.__views.__alloyId60.add(T.__views.__alloyId67),T.__views.__alloyId68=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"44%",width:"16%",text:"Cubagem AxLxP",id:"__alloyId68"}),T.__views.__alloyId60.add(T.__views.__alloyId68),T.__views.__alloyId69=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"60%",width:"6%",text:"Quant. de peças",id:"__alloyId69"}),T.__views.__alloyId60.add(T.__views.__alloyId69),T.__views.__alloyId70=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"66%",width:"6%",text:"Estoque",id:"__alloyId70"}),T.__views.__alloyId60.add(T.__views.__alloyId70),T.__views.__alloyId71=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"72%",width:"7%",text:"Preço total",id:"__alloyId71"}),T.__views.__alloyId60.add(T.__views.__alloyId71),T.__views.__alloyId72=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"79%",width:"7%",text:"IPI",id:"__alloyId72"}),T.__views.__alloyId60.add(T.__views.__alloyId72),T.__views.__alloyId73=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"86%",width:"6%",text:"S.T.",id:"__alloyId73"}),T.__views.__alloyId60.add(T.__views.__alloyId73),T.__views.__alloyId74=Ti.UI.createLabel({backgroundColor:"#008382",color:"#ffffff",font:{fontSize:13},textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,height:"100%",left:"92%",width:"8%",text:"Valor final do produto",id:"__alloyId74"}),T.__views.__alloyId60.add(T.__views.__alloyId74);var m={},E=[],N={type:"Ti.UI.View",childTemplates:function(){var e=[],a={type:"Ti.UI.View",childTemplates:function(){var e=[],t={type:"Ti.UI.ImageView",bindId:"imagem_produto",properties:{height:"95%",bindId:"imagem_produto"}};return e.push(t),e}(),properties:{width:"7%"}};e.push(a);var l={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(l);var r={type:"Ti.UI.Label",bindId:"label_ref",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"10%",font:{fontSize:9},color:"black",bindId:"label_ref"}};e.push(r);var _={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(_);var d={type:"Ti.UI.Label",bindId:"label_colecao",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"5%",font:{fontSize:9},color:"black",bindId:"label_colecao"}};e.push(d);var n={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(n);var s={type:"Ti.UI.Label",bindId:"label_prazo",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:9},color:"black",bindId:"label_prazo"}};e.push(s);var c={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(c);var f={type:"Ti.UI.Label",bindId:"label_tam",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"3%",font:{fontSize:9},color:"black",bindId:"label_tam"}};e.push(f);var h={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(h);var I={type:"Ti.UI.Label",bindId:"label_preco",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:9},color:"black",bindId:"label_preco"}};e.push(I);var u={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(u);var p={type:"Ti.UI.Label",bindId:"label_peso",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"4%",font:{fontSize:9},color:"black",bindId:"label_peso"}};e.push(p);var w={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(w);var v={type:"Ti.UI.Label",bindId:"label_cubagem",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"16%",font:{fontSize:9},color:"black",bindId:"label_cubagem"}};e.push(v);var g={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(g);var T={type:"Ti.UI.View",childTemplates:function(){var e=[],a={type:"Ti.UI.Button",properties:{left:3,top:5,height:25,width:25,font:{fontSize:11},backgroundColor:"#c0c0c0",color:"black",title:"+"},events:{click:t}};e.push(a);var l={type:"Ti.UI.Label",bindId:"label_quant",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,color:"black",bindId:"label_quant"}};e.push(l);var r={type:"Ti.UI.Button",properties:{left:3,bottom:5,height:25,width:25,font:{fontSize:11},backgroundColor:"#c0c0c0",color:"black",title:"-"},events:{click:i}};e.push(r);var _={type:"Ti.UI.ImageView",properties:{right:3,bottom:3,height:25,width:25,image:"/images/btn_excluir.png"},events:{click:o}};return e.push(_),e}(),properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",color:"black",font:{fontSize:9},backgroundColor:"white"}};e.push(T);var y={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(y);var b={type:"Ti.UI.Label",bindId:"label_estoque",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_estoque"}};e.push(b);var m={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(m);var E={type:"Ti.UI.Label",bindId:"label_precototal",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"black",bindId:"label_precototal"}};e.push(E);var N={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(N);var A={type:"Ti.UI.Label",bindId:"label_ipi",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"black",bindId:"label_ipi"}};e.push(A);var k={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(k);var U={type:"Ti.UI.Label",bindId:"label_sustrib",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_sustrib"}};e.push(U);var L={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(L);var x={type:"Ti.UI.Label",bindId:"label_valorfinal",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_valorfinal"}};return e.push(x),e}(),properties:{layout:"horizontal"}};E.push(N);var A={properties:{width:"100%",backgroundColor:"#EBEBEB",height:100,name:"pedido_lista_escuro"},childTemplates:E};m.pedido_lista_escuro=A;var k=[],U={type:"Ti.UI.View",childTemplates:function(){var e=[],a={type:"Ti.UI.View",childTemplates:function(){var e=[],t={type:"Ti.UI.ImageView",bindId:"imagem_produto",properties:{height:"95%",bindId:"imagem_produto"}};return e.push(t),e}(),properties:{width:"7%"}};e.push(a);var l={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(l);var r={type:"Ti.UI.Label",bindId:"label_ref",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"10%",font:{fontSize:9},color:"black",bindId:"label_ref"}};e.push(r);var _={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(_);var d={type:"Ti.UI.Label",bindId:"label_colecao",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"5%",font:{fontSize:9},color:"black",bindId:"label_colecao"}};e.push(d);var n={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(n);var s={type:"Ti.UI.Label",bindId:"label_prazo",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:9},color:"black",bindId:"label_prazo"}};e.push(s);var c={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(c);var f={type:"Ti.UI.Label",bindId:"label_tam",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"3%",font:{fontSize:9},color:"black",bindId:"label_tam"}};e.push(f);var h={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(h);var I={type:"Ti.UI.Label",bindId:"label_preco",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:9},color:"black",bindId:"label_preco"}};e.push(I);var u={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(u);var p={type:"Ti.UI.Label",bindId:"label_peso",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"4%",font:{fontSize:9},color:"black",bindId:"label_peso"}};e.push(p);var w={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(w);var v={type:"Ti.UI.Label",bindId:"label_cubagem",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"16%",font:{fontSize:9},color:"black",bindId:"label_cubagem"}};e.push(v);var g={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(g);var T={type:"Ti.UI.View",childTemplates:function(){var e=[],a={type:"Ti.UI.Button",properties:{left:3,top:5,height:25,width:25,font:{fontSize:11},backgroundColor:"#c0c0c0",color:"black",title:"+"},events:{click:t}};e.push(a);var l={type:"Ti.UI.Label",bindId:"label_quant",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,color:"black",bindId:"label_quant"}};e.push(l);var r={type:"Ti.UI.Button",properties:{left:3,bottom:5,height:25,width:25,font:{fontSize:11},backgroundColor:"#c0c0c0",color:"black",title:"-"},events:{click:i}};e.push(r);var _={type:"Ti.UI.ImageView",properties:{right:3,bottom:3,height:25,width:25,image:"/images/btn_excluir.png"},events:{click:o}};return e.push(_),e}(),properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",color:"black",font:{fontSize:9},backgroundColor:"white"}};e.push(T);var y={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(y);var b={type:"Ti.UI.Label",bindId:"label_estoque",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_estoque"}};e.push(b);var m={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(m);var E={type:"Ti.UI.Label",bindId:"label_precototal",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"black",bindId:"label_precototal"}};e.push(E);var N={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(N);var A={type:"Ti.UI.Label",bindId:"label_ipi",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"black",bindId:"label_ipi"}};e.push(A);var k={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(k);var U={type:"Ti.UI.Label",bindId:"label_sustrib",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_sustrib"}};e.push(U);var L={type:"Ti.UI.View",properties:{width:1,height:"100%",backgroundColor:"black"}};e.push(L);var x={type:"Ti.UI.Label",bindId:"label_valorfinal",properties:{textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",bindId:"label_valorfinal"}};return e.push(x),e}(),properties:{layout:"horizontal"}};k.push(U);var L={properties:{width:"100%",backgroundColor:"#FBFBFB",height:100,name:"pedido_lista_claro"},childTemplates:k};m.pedido_lista_claro=L,T.__views.__alloyId220=Ti.UI.createListSection({id:"__alloyId220"});var x=[];x.push(T.__views.__alloyId220),T.__views.listapedidos=Ti.UI.createListView({width:"99%",height:"80%",top:"10%",sections:x,templates:m,id:"listapedidos",defaultItemTemplate:"pedido_lista"}),T.__views.__alloyId59.add(T.__views.listapedidos),T.__views.__alloyId223=Ti.UI.createView({backgroundColor:"#008382",height:"10%",layout:"horizontal",top:"90%",width:"99%",id:"__alloyId223"}),T.__views.__alloyId59.add(T.__views.__alloyId223),T.__views.__alloyId224=Ti.UI.createView({width:1,height:"100%",id:"__alloyId224"}),T.__views.__alloyId223.add(T.__views.__alloyId224),T.__views.__alloyId225=Ti.UI.createView({width:1,height:"100%",id:"__alloyId225"}),T.__views.__alloyId223.add(T.__views.__alloyId225),T.__views.__alloyId226=Ti.UI.createView({width:1,height:"100%",id:"__alloyId226"}),T.__views.__alloyId223.add(T.__views.__alloyId226),T.__views.__alloyId227=Ti.UI.createView({width:1,height:"100%",id:"__alloyId227"}),T.__views.__alloyId223.add(T.__views.__alloyId227),T.__views.__alloyId228=Ti.UI.createView({width:1,height:"100%",id:"__alloyId228"}),T.__views.__alloyId223.add(T.__views.__alloyId228),T.__views.__alloyId229=Ti.UI.createLabel({color:"#ffffff",font:{fontSize:"14"},height:"100%",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,width:"39%",text:"SOMA DOS TOTAIS:",id:"__alloyId229"}),T.__views.__alloyId223.add(T.__views.__alloyId229),T.__views.__alloyId230=Ti.UI.createView({width:1,height:"100%",backgroundColor:"black",id:"__alloyId230"}),T.__views.__alloyId223.add(T.__views.__alloyId230),T.__views.__alloyId231=Ti.UI.createView({width:1,height:"100%",id:"__alloyId231"}),T.__views.__alloyId223.add(T.__views.__alloyId231),T.__views.__alloyId232=Ti.UI.createView({width:1,height:"100%",id:"__alloyId232"}),T.__views.__alloyId223.add(T.__views.__alloyId232),T.__views.__alloyId233=Ti.UI.createView({width:1,height:"100%",id:"__alloyId233"}),T.__views.__alloyId223.add(T.__views.__alloyId233),T.__views.__alloyId234=Ti.UI.createView({width:1,height:"100%",id:"__alloyId234"}),T.__views.__alloyId223.add(T.__views.__alloyId234),T.__views.label_totalPreco=Ti.UI.createLabel({color:"#ffffff",font:{fontSize:"14"},height:"100%",textAlign:Ti.UI.TEXT_ALIGNMENT_RIGHT,width:"39%",id:"label_totalPreco"}),T.__views.__alloyId223.add(T.__views.label_totalPreco),T.__views.__alloyId235=Ti.UI.createView({width:1,height:"100%",backgroundColor:"black",id:"__alloyId235"}),T.__views.__alloyId223.add(T.__views.__alloyId235),T.__views.label_totalIpi=Ti.UI.createLabel({textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"7%",font:{fontSize:10},color:"#ffffff",id:"label_totalIpi"}),T.__views.__alloyId223.add(T.__views.label_totalIpi),T.__views.__alloyId236=Ti.UI.createView({width:1,height:"100%",backgroundColor:"black",id:"__alloyId236"}),T.__views.__alloyId223.add(T.__views.__alloyId236),T.__views.__alloyId237=Ti.UI.createLabel({textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"black",id:"__alloyId237"}),T.__views.__alloyId223.add(T.__views.__alloyId237),T.__views.__alloyId238=Ti.UI.createView({width:1,height:"100%",backgroundColor:"black",id:"__alloyId238"}),T.__views.__alloyId223.add(T.__views.__alloyId238),T.__views.label_totalComIPI=Ti.UI.createLabel({textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,width:"6%",font:{fontSize:10},color:"#ffffff",id:"label_totalComIPI"}),T.__views.__alloyId223.add(T.__views.label_totalComIPI),T.__views.__alloyId239=Ti.UI.createView({backgroundColor:"#59595b",bottom:"1%",height:"7%",width:"99%",id:"__alloyId239"}),T.__views.carrinho.add(T.__views.__alloyId239),T.__views.__alloyId240=Ti.UI.createButton({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",bottom:"10%",color:"#ffffff",font:{fontSize:13},height:"80%",left:"1%",width:"10%",title:"Voltar",id:"__alloyId240"}),T.__views.__alloyId239.add(T.__views.__alloyId240),c?T.__views.__alloyId240.addEventListener("click",c):b["$.__views.__alloyId240!click!voltar"]=!0,T.__views.pagamento=Ti.UI.createButton({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",bottom:"10%",color:"#ffffff",font:{fontSize:11},height:"80%",left:"13%",width:"10%",title:"Ir para pagamento",id:"pagamento"}),T.__views.__alloyId239.add(T.__views.pagamento),n?T.__views.pagamento.addEventListener("click",n):b["$.__views.pagamento!click!pagamento"]=!0,T.__views.valor_total=Ti.UI.createButton({backgroundColor:"#59595b",bottom:"10%",color:"#ffffff",font:{fontSize:13},height:"80%",right:"1%",width:"30%",title:"Valor total do pedido: R$ 0.00",id:"valor_total"}),T.__views.__alloyId239.add(T.__views.valor_total),y.destroy=function(){},_.extend(T,T.__views),Ti.include("/api/config.js"),Ti.include("/database/carrinho.js"),Ti.include("/database/imagens_produtos.js");
var C,S,R,z=0,V=0,M=[],P="2020-01-01",B="2000-01-01",O=new Date(P),D=new Date(B),G=new Date(P),F=new Date(B),X=new Date(P),$=new Date(B),q=0,Y=0,W=[],j=[],H=[],J=[],Q=[],K=[],Z="mensal",et="mensal",tt=0,it=0;T.periodo_label_mes.transform=Ti.UI.create2DMatrix().rotate(-90),T.periodo_label_semana.transform=Ti.UI.create2DMatrix().rotate(-90),T.periodo_label_quinzena.transform=Ti.UI.create2DMatrix().rotate(-90);var ot,at=!1,lt=!1,rt=!1,_t=selecionaCarrinho();e(_t),T.label_totalPreco.text=formatCurrency(q),T.label_totalIpi.text=formatCurrency(Y);var dt=q+Y;T.label_totalComIPI.text=formatCurrency(dt),T.pagamento.hide(),T.periodo_label_mes.hide(),T.periodo_label_semana.hide(),T.periodo_label_quinzena.hide(),0==at&&(r(),r()),b["$.__views.__alloyId52!click!limparMarcacao"]&&T.__views.__alloyId52.addEventListener("click",I),b["$.__views.__alloyId53!click!comprando"]&&T.__views.__alloyId53.addEventListener("click",s),b["$.__views.seta!load!showDates"]&&T.__views.seta.addEventListener("load",r),b["$.__views.seta!click!showDates"]&&T.__views.seta.addEventListener("click",r),b["$.__views.__alloyId57!click!fechar"]&&T.__views.__alloyId57.addEventListener("click",d),b["$.__views.__alloyId240!click!voltar"]&&T.__views.__alloyId240.addEventListener("click",c),b["$.__views.pagamento!click!pagamento"]&&T.__views.pagamento.addEventListener("click",n),_.extend(T,y)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;