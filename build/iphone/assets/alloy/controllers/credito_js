function __processArg(e,t){var i=null;return e&&(i=e[t]||null,delete e[t]),i}function Controller(){function e(e){Ti.API.info(e.itemIndex),menuSelection(e.itemIndex)}function t(){Titanium.UI.currentWindow;var e=Titanium.UI.createOptionDialog({options:E,cancel:0,title:"Selecione o Cliente"});e.show(),e.addEventListener("click",function(e){b=e.index,i()})}function i(){var e=getClienteCredito(m[b]);if(e.isValidRow()){var t=e.fieldByName("cl_razao");r.selecao.text=t}}function o(){var e=getClienteCredito(m[b]);if(e.isValidRow()){var t=e.fieldByName("cl_credito_total"),i=e.fieldByName("cl_credito_utilizado"),o=t-i,a=e.fieldByName("cl_valor_minimo");r.credito.text=formatCurrency(t),r.utilizado.text=formatCurrency(i),r.saldo.text=formatCurrency(o),r.minimo.text=formatCurrency(a)}}function a(){if(0==U){var e=getClienteCredito(m[b]);if(e.isValidRow()){var t=e.fieldByName("cl_aviso"),i=e.fieldByName("cl_observacao");if(0==t)var o="#e9aca7";else if(1==t)var o="#e8e79c";else var o="#cfedcf";r.avisoDetalhe.text=i,r.avisoDetalhe.backgroundColor=o}U=1}else r.avisoDetalhe.text="",r.avisoDetalhe.backgroundColor="transparent",U=0}function l(){var e=dbLoad();createTableCredit();var t=r.pedido_credito.value,i="INSERT INTO credito (fk_id_cliente, fk_id_ep, fk_id_representante, mensagem) VALUES( "+b+", "+v+", "+w+",'"+t+"');";t.length>0?(e.execute(i),r.pedido_credito.value=""):Ti.UI.createAlertDialog({message:"O campo não pode estar vázio!",ok:"Ok",title:"Erro, campo vázio:"}).show()}require("alloy/controllers/BaseController").apply(this,Array.prototype.slice.call(arguments)),this.__controllerPath="credito",this.args=arguments[0]||{},arguments[0]&&(__processArg(arguments[0],"__parentSymbol"),__processArg(arguments[0],"$model"),__processArg(arguments[0],"__itemTemplate"));var r=this,d={},s={};r.__views.credito=Ti.UI.createWindow({backgroundColor:"white",id:"credito"}),r.__views.credito&&r.addTopLevelView(r.__views.credito);var n={},c=[],h={type:"Ti.UI.View",childTemplates:function(){var e=[],t={type:"Ti.UI.Label",bindId:"btnmenu",properties:{touchEnabled:"false",width:"98%",color:"white",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,bindId:"btnmenu"}};return e.push(t),e}(),properties:{backgroundColor:"#3f3a35",borderColor:"#9ccccb",borderWidth:"4",color:"#ffffff",width:"90%",height:"80%"},events:{click:e}};c.push(h);var I={properties:{height:"112dp",name:"menuTemplate"},childTemplates:c};n.menuTemplate=I;var f=[];r.__views.__alloyId296={btnmenu:{text:"CNPJ/\n RAZÃO SOCIAL/\n ENDEREÇO LOJA"},properties:{id:"__alloyId296"}},f.push(r.__views.__alloyId296),r.__views.__alloyId297={btnmenu:{text:"ANÁLISE DE \n CRÉDITO"},properties:{id:"__alloyId297"}},f.push(r.__views.__alloyId297),r.__views.__alloyId298={btnmenu:{text:"IR AO\n CATÁLOGO"},properties:{id:"__alloyId298"}},f.push(r.__views.__alloyId298),r.__views.__alloyId299={btnmenu:{text:"PEDIDOS"},properties:{id:"__alloyId299"}},f.push(r.__views.__alloyId299),r.__views.__alloyId300={btnmenu:{text:"TRANSPORTADORA"},properties:{id:"__alloyId300"}},f.push(r.__views.__alloyId300),r.__views.__alloyId301={btnmenu:{text:"NOVO CLIENTE"},properties:{id:"__alloyId301"}},f.push(r.__views.__alloyId301),r.__views.__alloyId302={btnmenu:{text:"FUNÇÕES"},properties:{id:"__alloyId302"}},f.push(r.__views.__alloyId302),r.__views.__alloyId303={btnmenu:{text:"EMAIL"},properties:{id:"__alloyId303"}},f.push(r.__views.__alloyId303),r.__views.__alloyId304={btnmenu:{text:"VOLTAR PARA TELA INICIAL"},properties:{id:"__alloyId304"}},f.push(r.__views.__alloyId304),r.__views.__alloyId305={btnmenu:{text:"TROCAR\n MARCA"},properties:{id:"__alloyId305"}},f.push(r.__views.__alloyId305),r.__views.__alloyId306={btnmenu:{text:"SAIR"},properties:{id:"__alloyId306"}},f.push(r.__views.__alloyId306),r.__views.__alloyId293=Ti.UI.createListSection({id:"__alloyId293"}),r.__views.__alloyId293.items=f;var u=[];u.push(r.__views.__alloyId293),r.__views.__alloyId283=Ti.UI.createListView({backgroundColor:"#ebf7f6",height:"100%",left:"0",width:"15%",sections:u,templates:n,defaultItemTemplate:"menuTemplate",id:"__alloyId283"}),r.__views.credito.add(r.__views.__alloyId283),r.__views.__alloyId308=Ti.UI.createView({height:"100%",right:"0",width:"85%",id:"__alloyId308"}),r.__views.credito.add(r.__views.__alloyId308),r.__views.__alloyId309=Ti.UI.createView({height:"90",top:"0",width:"98%",id:"__alloyId309"}),r.__views.__alloyId308.add(r.__views.__alloyId309),r.__views.__alloyId310=Ti.UI.createView({height:"90%",left:"0",width:"15%",id:"__alloyId310"}),r.__views.__alloyId309.add(r.__views.__alloyId310),r.__views.logoEmpresa=Ti.UI.createImageView({image:"/images/logo_rodape.jpg",left:"0",id:"logoEmpresa"}),r.__views.__alloyId310.add(r.__views.logoEmpresa),r.__views.__alloyId311=Ti.UI.createButton({backgroundColor:"#FFFFFF",color:"#4e8789",height:"90",left:"15%",width:"70%",title:"ANÁLISE DE CRÉDITO",id:"__alloyId311"}),r.__views.__alloyId309.add(r.__views.__alloyId311),r.__views.__alloyId312=Ti.UI.createView({height:"90",left:"85%",width:"15%",id:"__alloyId312"}),r.__views.__alloyId309.add(r.__views.__alloyId312),r.__views.__alloyId313=Ti.UI.createImageView({image:"/images/logo_rodape.jpg",right:"0",id:"__alloyId313"}),r.__views.__alloyId312.add(r.__views.__alloyId313),r.__views.__alloyId314=Ti.UI.createView({borderColor:"#4e8789",borderWidth:"4",top:"90",width:"98%",id:"__alloyId314"}),r.__views.__alloyId308.add(r.__views.__alloyId314),r.__views.__alloyId315=Ti.UI.createView({height:"65%",left:"0",top:"0",width:"50%",id:"__alloyId315"}),r.__views.__alloyId314.add(r.__views.__alloyId315),r.__views.__alloyId316=Ti.UI.createView({height:"50",top:"10",width:"100%",id:"__alloyId316"}),r.__views.__alloyId315.add(r.__views.__alloyId316),r.__views.selecao=Ti.UI.createLabel({color:"black",borderColor:"#6EA9A0",borderWidth:"4",height:"50",left:"80",width:"300",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,id:"selecao",text:"Seleção de cliente"}),r.__views.__alloyId316.add(r.__views.selecao),r.__views.__alloyId317=Ti.UI.createView({height:"50",top:"70",width:"100%",id:"__alloyId317"}),r.__views.__alloyId315.add(r.__views.__alloyId317),r.__views.__alloyId318=Ti.UI.createButton({backgroundColor:"#FFFFFF",color:"#222222",height:"50",left:"0",width:"70",title:"DATA",id:"__alloyId318"}),r.__views.__alloyId317.add(r.__views.__alloyId318),r.__views.data=Ti.UI.createLabel({color:"black",backgroundColor:"#EBEBE4",borderColor:"#6EA9A0",borderWidth:"4",height:"50",left:"80",width:"220",textAlign:Ti.UI.TEXT_ALIGNMENT_CENTER,id:"data"}),r.__views.__alloyId317.add(r.__views.data),r.__views.__alloyId319=Ti.UI.createButton({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",height:"50",left:"310",width:"70",color:"white",title:"Ir",id:"__alloyId319"}),r.__views.__alloyId317.add(r.__views.__alloyId319),o?r.__views.__alloyId319.addEventListener("click",o):s["$.__views.__alloyId319!click!ir"]=!0,r.__views.__alloyId320=Ti.UI.createButton({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",color:"#ffffff",left:"8%",top:"30%",title:"Detalhes",id:"__alloyId320"}),r.__views.__alloyId314.add(r.__views.__alloyId320),a?r.__views.__alloyId320.addEventListener("click",a):s["$.__views.__alloyId320!click!detalhe"]=!0,r.__views.avisoDetalhe=Ti.UI.createLabel({color:"#000000",height:"30",left:"20%",top:"30%",width:"20%",id:"avisoDetalhe"}),r.__views.__alloyId314.add(r.__views.avisoDetalhe),r.__views.__alloyId321=Ti.UI.createView({height:"65%",left:"50%",top:"0",width:"50%",id:"__alloyId321"}),r.__views.__alloyId314.add(r.__views.__alloyId321),r.__views.__alloyId322=Ti.UI.createView({height:"50",top:"0",width:"100%",id:"__alloyId322"}),r.__views.__alloyId321.add(r.__views.__alloyId322),r.__views.__alloyId323=Ti.UI.createButton({backgroundColor:"#FFFFFF",color:"#4E8789",height:"50",left:"0",title:"CRÉDITO",id:"__alloyId323"}),r.__views.__alloyId322.add(r.__views.__alloyId323),r.__views.__alloyId324=Ti.UI.createView({backgroundColor:"#CCE9E5",height:"50",left:"0",top:"45",width:"95%",id:"__alloyId324"}),r.__views.__alloyId321.add(r.__views.__alloyId324),r.__views.credito=Ti.UI.createLabel({color:"#222222",height:"50",width:"96%",id:"credito"}),r.__views.__alloyId324.add(r.__views.credito),r.__views.__alloyId325=Ti.UI.createView({height:"50",top:"95",width:"100%",id:"__alloyId325"}),r.__views.__alloyId321.add(r.__views.__alloyId325),r.__views.__alloyId326=Ti.UI.createButton({backgroundColor:"#FFFFFF",color:"#4E8789",height:"50",left:"0",title:"CRÉDITO UTILIZADO",id:"__alloyId326"}),r.__views.__alloyId325.add(r.__views.__alloyId326),r.__views.__alloyId327=Ti.UI.createView({backgroundColor:"#CCE9E5",height:"50",left:"0",top:"140",width:"95%",id:"__alloyId327"}),r.__views.__alloyId321.add(r.__views.__alloyId327),r.__views.utilizado=Ti.UI.createLabel({color:"#222222",height:"50",width:"96%",id:"utilizado"}),r.__views.__alloyId327.add(r.__views.utilizado),r.__views.__alloyId328=Ti.UI.createView({height:"50",top:"190",width:"100%",id:"__alloyId328"}),r.__views.__alloyId321.add(r.__views.__alloyId328),r.__views.__alloyId329=Ti.UI.createButton({backgroundColor:"#FFFFFF",color:"#4E8789",height:"50",left:"0",title:"SALDO",id:"__alloyId329"}),r.__views.__alloyId328.add(r.__views.__alloyId329),r.__views.__alloyId330=Ti.UI.createView({backgroundColor:"#CCE9E5",height:"50",left:"0",top:"235",width:"95%",id:"__alloyId330"}),r.__views.__alloyId321.add(r.__views.__alloyId330),r.__views.saldo=Ti.UI.createLabel({color:"#222222",height:"50",width:"96%",id:"saldo"}),r.__views.__alloyId330.add(r.__views.saldo),r.__views.__alloyId331=Ti.UI.createView({height:"50",top:"285",width:"100%",id:"__alloyId331"}),r.__views.__alloyId321.add(r.__views.__alloyId331),r.__views.__alloyId332=Ti.UI.createButton({backgroundColor:"#FFFFFF",color:"#4E8789",height:"50",left:"0",title:"VALOR MÍNIMO PARA COMPRA",id:"__alloyId332"}),r.__views.__alloyId331.add(r.__views.__alloyId332),r.__views.__alloyId333=Ti.UI.createView({backgroundColor:"#CCE9E5",height:"50",left:"0",top:"330",width:"95%",id:"__alloyId333"}),r.__views.__alloyId321.add(r.__views.__alloyId333),r.__views.minimo=Ti.UI.createLabel({color:"#222222",height:"50",width:"96%",id:"minimo"}),r.__views.__alloyId333.add(r.__views.minimo),r.__views.__alloyId334=Ti.UI.createView({height:"35%",top:"65%",width:"95%",id:"__alloyId334"}),r.__views.__alloyId314.add(r.__views.__alloyId334),r.__views.__alloyId335=Ti.UI.createView({height:"50",top:"0",width:"100%",id:"__alloyId335"}),r.__views.__alloyId334.add(r.__views.__alloyId335),r.__views.__alloyId336=Ti.UI.createButton({backgroundColor:"#FFFFFF",color:"#4E8789",height:"50",left:"0",title:"PEDIDO DE AUMENTO DE CRÉDITO",id:"__alloyId336"}),r.__views.__alloyId335.add(r.__views.__alloyId336),r.__views.pedido_credito=Ti.UI.createTextField({borderColor:"#6EA9A0",borderWidth:"4",height:"45%",top:"45",width:"100%",color:"black",textAlign:"center",hintText:"",id:"pedido_credito"}),r.__views.__alloyId334.add(r.__views.pedido_credito),r.__views.__alloyId337=Ti.UI.createButton({backgroundGradient:{type:"linear",colors:["#2c8f8e","#206764"]},borderRadius:"5",bottom:"12",height:"50",right:"8",width:"90",color:"white",title:"Enviar",id:"__alloyId337"}),r.__views.__alloyId334.add(r.__views.__alloyId337),l?r.__views.__alloyId337.addEventListener("click",l):s["$.__views.__alloyId337!click!funcEnviarCredito"]=!0,d.destroy=function(){},_.extend(r,r.__views),arguments[0]||{},Ti.include("/api/menu.js"),Ti.include("/database/aparencia.js"),Ti.include("/api/config.js"),Ti.include("/database/credito.js"),r.logoEmpresa.image=getImagesFolder()+selectLogoFile();var w=Ti.App.Properties.getString(CURRENT_USER_ID),v=Ti.App.Properties.getString(CURRENT_EMPRESA);Ti.App.Properties.getString(SELECTED_CLIENTS);var p=new Date,y=p.getDate(),g=p.getMonth(),T=p.getFullYear(),b=0,m=[],E=[],N=["janeiro","fevereiro","março","abril","maio","junho","julho","agosto","setembro","outubro","novembro","dezembro"],A=y+" de  "+N[g]+" de "+T;r.data.text="  "+A,r.selecao.addEventListener("click",function(){t()});for(var k=getClienteNomes(getSelectedClients().toString());k.isValidRow();)m.push(k.fieldByName("cl_id")),E.push(k.fieldByName("cl_razao")),k.next();i();var U=0;s["$.__views.__alloyId319!click!ir"]&&r.__views.__alloyId319.addEventListener("click",o),s["$.__views.__alloyId320!click!detalhe"]&&r.__views.__alloyId320.addEventListener("click",a),s["$.__views.__alloyId337!click!funcEnviarCredito"]&&r.__views.__alloyId337.addEventListener("click",l),_.extend(r,d)}var Alloy=require("alloy"),Backbone=Alloy.Backbone,_=Alloy._;module.exports=Controller;